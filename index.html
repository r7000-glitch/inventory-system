<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Inventory System - CF Outsourcing Solutions</title>
  <style>
    body {font-family:"Segoe UI",Roboto,Arial,sans-serif;background:#f9fafb;margin:0;padding:20px;color:#111;}
    h1 {text-align:center;margin-bottom:20px;}
    table {width:100%;border-collapse:collapse;margin-top:20px;}
    th,td {border:1px solid #ccc;padding:8px;text-align:left;font-size:14px;}
    th {background:#f3f4f6;cursor:pointer;}
    tr:nth-child(even){background:#f9fafb;}
    .actions {margin:10px 0;display:flex;gap:10px;flex-wrap:wrap;}
    button {padding:8px 12px;border:none;border-radius:4px;background:#2563eb;color:#fff;cursor:pointer;}
    button:hover {background:#1e40af;}
    input,select {padding:6px;border:1px solid #ccc;border-radius:4px;}
    .modal {display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background:rgba(0,0,0,0.5);}
    .modal-content {background:#fff;margin:5% auto;padding:20px;border:1px solid #888;width:400px;max-width:90%;border-radius:8px;}
    .close {float:right;font-size:28px;font-weight:bold;cursor:pointer;}
    .filters {display:flex;gap:10px;flex-wrap:wrap;margin-bottom:10px;}
    .login-modal {display:flex;align-items:center;justify-content:center;height:100vh;background:#888;}
    .login-box {background:#fff;padding:20px;border-radius:8px;width:300px;box-shadow:0 4px 6px rgba(0,0,0,0.1);}
    .login-box h2 {text-align:center;margin-bottom:15px;}
    .login-box input {width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:4px;}
    .login-box button {width:100%;padding:10px;background:#2563eb;color:#fff;border:none;border-radius:4px;cursor:pointer;}
    .login-box button:hover {background:#1e40af;}
  </style>
</head>
<body>

<!-- ðŸ”’ Login Modal -->
<div id="loginModal" class="login-modal">
  <div class="login-box">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username" required>
    <input type="password" id="password" placeholder="Password" required>
    <button id="loginBtn">Login</button>
  </div>
</div>

<!-- ðŸ”‘ Main Content -->
<div id="mainContent" style="display:none;">
  <h1>Inventory System - CF Outsourcing Solutions</h1>

  <div class="filters">
    <input type="text" id="searchBox" placeholder="Search...">
  </div>

  <div class="actions">
    <button id="editBtn">Edit</button>
    <button id="deleteBtn">Delete</button>
    <button id="importBtn">Import</button>
    <button id="exportBtn">Export</button>
    <button id="addAssetBtn">Add Asset</button>
    <button id="logoutBtn" style="background:#6b7280;color:#fff;">Logout</button>
    <input type="file" id="importFile" accept=".csv" style="display:none;">
  </div>

  <table id="assetTable">
    <thead>
      <tr>
        <th>Asset Tag</th>
        <th>Asset Name</th>
        <th>Asset Type</th>
        <th>Serial Number</th>
        <th>Status</th>
        <th>Location</th>
        <th>Station</th>
        <th>Warranty</th>
        <th>Vendor</th>
        <th>Date Purchased</th>
        <th>Date Added</th>
        <th>Remarks</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
  /* âœ… Login logic */
  document.getElementById("loginBtn").onclick = function(){
    const u = document.getElementById("username").value;
    const p = document.getElementById("password").value;
    if(u==="admin" && p==="1234"){
      localStorage.setItem("loggedIn","true");
      document.getElementById("loginModal").style.display="none";
      document.getElementById("mainContent").style.display="block";
    } else {
      alert("Invalid login credentials.");
    }
  };
  if(localStorage.getItem("loggedIn")==="true"){
    document.getElementById("loginModal").style.display="none";
    document.getElementById("mainContent").style.display="block";
  }

  /* ðŸ”“ Logout */
  document.getElementById("logoutBtn").onclick = function(){
    localStorage.removeItem("loggedIn");
    document.getElementById("mainContent").style.display="none";
    document.getElementById("loginModal").style.display="flex";
  };

  /* âœ… CSV line parser (handles commas in remarks) */
  function parseCSVLine(line) {
    const regex = /(".*?"|[^",]+)(?=\s*,|\s*$)/g;
    let result = [];
    let match;
    while (match = regex.exec(line)) {
      result.push(match[0].replace(/^"|"$/g, ""));
    }
    return result;
  }

  /* Your existing inventory code continues hereâ€¦ */
  const assets=[];
  const tbody=document.querySelector("#assetTable tbody");

  function renderTable(){
    tbody.innerHTML="";
    assets.forEach(a=>{
      const tr=document.createElement("tr");
      tr.innerHTML=`
        <td>${a.tag}</td>
        <td>${a.assetName||""}</td>
        <td>${a.assetType}</td>
        <td>${a.serial}</td>
        <td>${a.status}</td>
        <td>${a.location}</td>
        <td>${a.station}</td>
        <td>${a.warranty||""}</td>
        <td>${a.vendor||""}</td>
        <td>${a.datePurchased||""}</td>
        <td>${a.date}</td>
        <td>${a.notes||""}</td>
      `;
      tbody.appendChild(tr);
    });
  }

  document.getElementById("exportBtn").onclick=function(){
    let csv="Asset Tag,Asset Name,Asset Type,Serial Number,Status,Location,Station,Warranty,Vendor,Date Purchased,Date Added,Remarks\n";
    assets.forEach(a=>{
      csv+=`"${a.tag}","${a.assetName||""}","${a.assetType}","${a.serial}","${a.status}","${a.location}","${a.station}","${a.warranty||""}","${a.vendor||""}","${a.datePurchased||""}","${a.date}","${a.notes||""}"\n`;
    });
    const blob=new Blob([csv],{type:"text/csv"});
    const link=document.createElement("a");
    link.href=URL.createObjectURL(blob);
    const now=new Date();
    const mm=String(now.getMonth()+1).padStart(2,"0");
    const dd=String(now.getDate()).padStart(2,"0");
    const yy=String(now.getFullYear()).slice(-2);
    link.download=`CFInventory${mm}${dd}${yy}.csv`;
    link.click();
  };

  document.getElementById("importBtn").onclick=()=>document.getElementById("importFile").click();
  document.getElementById("importFile").addEventListener("change",function(e){
    const file=e.target.files[0]; if(!file)return;
    const reader=new FileReader();
    reader.onload=function(ev){
      const lines=ev.target.result.split("\n").slice(1);
      lines.forEach(line=>{
        if(line.trim()==="")return;
        const cols=parseCSVLine(line);
        if(cols.length>=12){
          assets.push({
            tag:cols[0],
            assetName:cols[1],
            assetType:cols[2],
            serial:cols[3],
            status:cols[4],
            location:cols[5],
            station:cols[6],
            warranty:cols[7],
            vendor:cols[8],
            datePurchased:cols[9],
            date:cols[10],
            notes:cols[11]
          });
        }
      });
      renderTable();
    };
    reader.readAsText(file);
  });
</script>
</body>
</html>
